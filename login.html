<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - Mewar School App</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="login-container">
    <img src="assets/logo.jpg" alt="Web Codence Logo" class="logo">
    <h2>üîê Login Panel</h2>

    <label for="role">Select Role:</label>
    <select id="role" onchange="updateLoginFields()">
      <option value="admin">Admin</option>
      <option value="school">School</option>
      <option value="teacher">Teacher</option>
    </select>

    <form id="loginForm" onsubmit="handleLogin(event)">
      <div id="inputFieldContainer">
        <!-- Dynamic input will appear here -->
      </div>
      <input type="password" id="password" placeholder="Enter Password" required>
      <button type="submit">Login</button>
    </form>

    <p id="error" style="color: red;"></p>
  </div>

  <script>
    function updateLoginFields() {
      const role = document.getElementById('role').value;
      const inputDiv = document.getElementById('inputFieldContainer');
      inputDiv.innerHTML = '';

      if (role === 'admin') {
        inputDiv.innerHTML = `<input type="text" id="username" placeholder="Enter Username" required>`;
      } else if (role === 'school') {
        inputDiv.innerHTML = `<input type="email" id="email" placeholder="Enter School Email" required>`;
      } else {
        inputDiv.innerHTML = `<input type="text" id="employeeId" placeholder="Enter Employee ID" required>`;
      }
    }

    function handleLogin(e) {
      e.preventDefault();
      const role = document.getElementById('role').value;
      const password = document.getElementById('password').value;
      let valid = false;

      if (role === 'admin') {
        const username = document.getElementById('username').value;
        if (username === 'admin' && password === 'Akshatjain250@') {
          localStorage.setItem("user_role", "admin");
          window.location.href = "admin_panel.html";
          valid = true;
        }
      } else if (role === 'school') {
        const email = document.getElementById('email').value;
        if (email === 'mewarpublicschool181@gmail.com' && password === 'Akshatjain250@') {
          localStorage.setItem("user_role", "school");
          window.location.href = "school_panel.html";
          valid = true;
        }
      } else if (role === 'teacher') {
        const empId = document.getElementById('employeeId').value;
        if (empId === 'MEWAR001' && password === '1234') {
          localStorage.setItem("user_role", "teacher");
          localStorage.setItem("logged_teacher_id", empId);
          window.location.href = "teacher_panel.html";
          valid = true;
        }
      }

      if (!valid) {
        document.getElementById('error').textContent = '‚ùå Invalid credentials. Please try again.';
      }
    }

    // Auto show Admin fields on load
    window.onload = updateLoginFields;
  </script>
</body>
</html>
