<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Mewar App</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="login-box">
    <h2>Login</h2>
    <form onsubmit="return loginUser()">
      <label for="role">Select Role:</label>
      <select id="role" required>
        <option value="">--Select--</option>
        <option value="admin">Admin</option>
        <option value="school">School</option>
        <option value="teacher">Teacher</option>
      </select>

      <input type="text" id="username" placeholder="Email / Employee ID" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
    <p id="loginMessage" style="color:red;"></p>
  </div>

  <script>
    function loginUser() {
      const role = document.getElementById("role").value;
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;

      if (role === "admin") {
        if (username === "admin" && password === "akshatjain250@") {
          window.location.href = "admin_panel.html";
          return false;
        } else {
          document.getElementById("loginMessage").innerText = "Invalid Admin Credentials";
          return false;
        }
      }

      if (role === "school") {
        if (username === "mewarpublicschool181@gmail.com" && password === "mewar1234") {
          localStorage.setItem("schoolUser", username);
          window.location.href = "school_panel.html";
          return false;
        } else {
          document.getElementById("loginMessage").innerText = "Invalid School Credentials";
          return false;
        }
      }

      if (role === "teacher") {
        const teachers = JSON.parse(localStorage.getItem("teachers")) || [];
        const found = teachers.find(t => t.empID === username && t.password === password);

        if (found) {
          localStorage.setItem("teacherEmpID", found.empID);
          window.location.href = "teacher_panel.html";
          return false;
        } else {
          document.getElementById("loginMessage").innerText = "Invalid Teacher Credentials";
          return false;
        }
      }
    }
  </script>
</body>
</html>
